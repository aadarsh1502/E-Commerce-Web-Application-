{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}
<!-- HERO BANNER -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-7 text-white">
                <span class="hero-badge">ðŸ”¥ New Season Sale â€” Up to 70% OFF</span>
                <h1 class="hero-title mt-3">Discover Amazing<br>Products</h1>
                <p class="lead mt-3 mb-4 opacity-75">
                    Shop the latest trends in electronics, fashion, books and more.
                    Premium quality at prices you'll love.
                </p>
                <div class="d-flex gap-3 flex-wrap">
                    <a href="{% url 'product_list' %}" class="btn btn-light btn-lg px-4 fw-600">
                        <i class="fas fa-shopping-bag me-2"></i>Shop Now
                    </a>
                    <a href="#categories" class="btn btn-outline-light btn-lg px-4">Browse Categories</a>
                </div>
                <div class="d-flex gap-4 mt-5 flex-wrap">
                    <div class="hero-badge"><i class="fas fa-box-open me-1"></i> 50K+ Products</div>
                    <div class="hero-badge"><i class="fas fa-truck me-1"></i> Free Shipping</div>
                    <div class="hero-badge"><i class="fas fa-undo me-1"></i> Easy Returns</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CATEGORY GRID -->
<section class="py-5 bg-white" id="categories">
    <div class="container">
        <h2 class="section-title text-center mb-5">Shop by Category</h2>
        <div class="row g-3 justify-content-center">
            {% for cat in categories %}
            <div class="col-6 col-md-2">
                <a href="{{ cat.get_absolute_url }}" class="text-decoration-none">
                    <div class="category-card text-center">
                        <div class="category-icon mx-auto mb-2"
                            style="background: linear-gradient(135deg, {% cycle '#667eea,#764ba2' '#f093fb,#f5576c' '#4facfe,#00f2fe' '#43e97b,#38f9d7' '#fa709a,#fee140' '#a18cd1,#fbc2eb' %});">
                            <i
                                class="fas {% cycle 'fa-laptop' 'fa-tshirt' 'fa-book' 'fa-running' 'fa-home' 'fa-spa' %} text-white"></i>
                        </div>
                        <h6 class="mt-2 mb-0 text-dark fw-600 small">{{ cat.name }}</h6>
                        <small class="text-muted">{{ cat.product_count }} Products</small>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- FEATURED PRODUCTS -->
<section class="py-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title mb-0">Featured Products</h2>
            <a href="{% url 'product_list' %}" class="text-primary fw-600 text-decoration-none">
                View All <i class="fas fa-arrow-right ms-1"></i>
            </a>
        </div>
        <div class="row g-3">
            {% for product in featured_products %}
            <div class="col-6 col-md-3">
                <div class="card product-card h-100">
                    <div class="product-img-wrapper">
                        {% if product.discount_percentage > 0 %}
                        <span class="discount-badge">-{{ product.discount_percentage }}%</span>
                        {% endif %}
                        {% if product.image %}
                        <img src="{{ product.image.url }}" class="product-img" alt="{{ product.name }}">
                        {% else %}
                        <img src="https://via.placeholder.com/400x400/6C63FF/FFF?text=Product" class="product-img"
                            alt="{{ product.name }}">
                        {% endif %}
                        {% if not product.is_in_stock %}
                        <div class="out-of-stock-overlay">Out of Stock</div>
                        {% endif %}
                    </div>
                    <div class="card-body d-flex flex-column">
                        <span class="product-category">{{ product.category.name }}</span>
                        <a href="{{ product.get_absolute_url }}" class="text-decoration-none">
                            <h6 class="product-title">{{ product.name|truncatewords:8 }}</h6>
                        </a>
                        <div class="stars mb-2">
                            {% for i in "12345" %}{% if forloop.counter <= product.average_rating %}<i
                                class="fas fa-star"></i>{% else %}<i class="far fa-star stars-empty"></i>{% endif %}
                                
                                {%endfor %}
                                <small class="text-muted ms-1">({{ product.review_count }})</small>
                        </div>
                        <div class="mt-auto">
                            <span class="price-current">â‚¹{{ product.effective_price }}</span>
                            {% if product.discount_price %}
                            <span class="price-original">â‚¹{{ product.price }}</span>
                            {% endif %}
                        </div>
                        <form class="add-to-cart-form mt-2" method="post" action="{% url 'add_to_cart' product.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary btn-sm w-100" {% if not product.is_in_stock %}
                                disabled{% endif %}>
                                <i class="fas fa-cart-plus me-1"></i>Add to Cart
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center py-5">
                <p class="text-muted">No featured products available yet.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- PROMOTIONAL BANNER -->
<section class="promo-banner py-5">
    <div class="container">
        <div class="row align-items-center text-center text-md-start">
            <div class="col-md-6 mb-3 mb-md-0">
                <h3 class="fw-700 mb-2">
                    <i class="fas fa-rocket me-2 text-warning"></i>Free Shipping on orders above â‚¹499
                </h3>
                <p class="mb-0 opacity-75">No minimum order for your first purchase!</p>
            </div>
            <div class="col-md-6 text-md-end">
                <div class="d-flex justify-content-center justify-content-md-end gap-4 flex-wrap">
                    <span><i class="fas fa-undo me-2 text-info"></i>Easy 30-day returns</span>
                    <span><i class="fas fa-lock me-2 text-success"></i>Secure Payments</span>
                    <span><i class="fas fa-headset me-2 text-warning"></i>24/7 Support</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- NEW ARRIVALS -->
<section class="py-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title mb-0">New Arrivals</h2>
            <a href="{% url 'product_list' %}?sort=newest" class="text-primary fw-600 text-decoration-none">
                View All <i class="fas fa-arrow-right ms-1"></i>
            </a>
        </div>
        <div class="row g-3">
            {% for product in new_arrivals %}
            <div class="col-6 col-md-3">
                <div class="card product-card h-100">
                    <div class="product-img-wrapper">
                        <span class="new-badge">NEW</span>
                        {% if product.image %}
                        <img src="{{ product.image.url }}" class="product-img" alt="{{ product.name }}">
                        {% else %}
                        <img src="https://via.placeholder.com/400x400/28a745/FFF?text=Product" class="product-img"
                            alt="{{ product.name }}">
                        {% endif %}
                    </div>
                    <div class="card-body d-flex flex-column">
                        <span class="product-category">{{ product.category.name }}</span>
                        <a href="{{ product.get_absolute_url }}" class="text-decoration-none">
                            <h6 class="product-title">{{ product.name|truncatewords:8 }}</h6>
                        </a>
                        <div class="mt-auto">
                            <span class="price-current">â‚¹{{ product.effective_price }}</span>
                            {% if product.discount_price %}
                            <span class="price-original">â‚¹{{ product.price }}</span>
                            {% endif %}
                        </div>
                        <form class="add-to-cart-form mt-2" method="post" action="{% url 'add_to_cart' product.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary btn-sm w-100" {% if not product.is_in_stock %}
                                disabled{% endif %}>
                                <i class="fas fa-cart-plus me-1"></i>Add to Cart
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center py-5">
                <p class="text-muted">New arrivals coming soon!</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- WHY SHOPZONE -->
<section class="py-5 bg-white">
    <div class="container">
        <h2 class="section-title text-center mb-5">Why ShopZone?</h2>
        <div class="row g-4">
            <div class="col-6 col-md-3">
                <div class="card border-0 text-center p-4 hover-lift h-100" style="background: #f0efff;">
                    <div class="fs-1 mb-3">ðŸšš</div>
                    <h6 class="fw-700">Free Delivery</h6>
                    <p class="text-muted small mb-0">Free shipping on orders above â‚¹499. No hidden charges.</p>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card border-0 text-center p-4 hover-lift h-100" style="background: #e8f5e9;">
                    <div class="fs-1 mb-3">ðŸ”’</div>
                    <h6 class="fw-700">Secure Payment</h6>
                    <p class="text-muted small mb-0">100% secure payment processing with encryption.</p>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card border-0 text-center p-4 hover-lift h-100" style="background: #fff3e0;">
                    <div class="fs-1 mb-3">ðŸ”„</div>
                    <h6 class="fw-700">Easy Returns</h6>
                    <p class="text-muted small mb-0">30-day hassle-free returns on all products.</p>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card border-0 text-center p-4 hover-lift h-100" style="background: #e3f2fd;">
                    <div class="fs-1 mb-3">ðŸ’¬</div>
                    <h6 class="fw-700">24/7 Support</h6>
                    <p class="text-muted small mb-0">Round the clock customer support via chat & email.</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}